// Create an array of cards with card objects

let cards = [
	{
		id: 'card1',
		cardFrontImage: 'images/memoryCards/accessible-icon-brands.svg'
	},
	// {
	// 	id: 'card2',
	// 	cardFrontImage: 'images/memoryCards/angrycreative-brands.svg'
	// },
	// {
	// 	id: 'card3',
	// 	cardFrontImage: 'images/memoryCards/asterisk-solid.svg'
	// },
	{
		id: 'card4',
		cardFrontImage: 'images/memoryCards/balance-scale-right-solid.svg'
	},
	// {
	// 	id: 'card5',
	// 	cardFrontImage: 'images/memoryCards/brain-solid.svg'
	// },
	// {
	// 	id: 'card6',
	// 	cardFrontImage: 'images/memoryCards/cloud-sun-rain-solid.svg'
	// },
	{
		id: 'card7',
		cardFrontImage: 'images/memoryCards/cocktail-solid.svg'
	},
	{
		id: 'card8',
		cardFrontImage: 'images/memoryCards/heart-solid.svg'
	},
	// {
	// 	id: 'card9',
	// 	cardFrontImage: 'images/memoryCards/icons-solid.svg'
	// },
	{
		id: 'card10',
		cardFrontImage: 'images/memoryCards/praying-hands-solid.svg'
	},
	// {
	// 	id: 'card11',
	// 	cardFrontImage: 'images/memoryCards/lemon-regular.svg'
	// },
	// {
	// 	id: 'card12',
	// 	cardFrontImage: 'images/memoryCards/hiking-solid.svg'
	// },
	// {
	// 	id: 'card13',
	// 	cardFrontImage: 'images/memoryCards/cannabis-solid.svg'
	// },
	// {
	// 	id: 'card14',
	// 	cardFrontImage: 'images/memoryCards/pepper-hot-solid.svg'
	// },
	// {
	// 	id: 'card15',
	// 	cardFrontImage: 'images/memoryCards/passport-solid.svg'
	// },
	{
		id: 'card16',
		cardFrontImage: 'images/memoryCards/code-solid.svg'
	},
	{
		id: 'card17',
		cardFrontImage: 'images/memoryCards/coffee-solid.svg'
	},
	// {
	// 	id: 'card18',
	// 	cardFrontImage: 'images/memoryCards/dev-brands.svg'
	// },
	// {
	// 	id: 'card19',
	// 	cardFrontImage: 'images/memoryCards/door-open-solid.svg'
	// },
	// {
	// 	id: 'card20',
	// 	cardFrontImage: 'images/memoryCards/female-solid.svg'
	// },
	// {
	// 	id: 'card21',
	// 	cardFrontImage: 'images/memoryCards/free-code-camp-brands.svg'
	// },
	{
		id: 'card22',
		cardFrontImage: 'images/memoryCards/gem-regular.svg'
	},
	// {
	// 	id: 'card23',
	// 	cardFrontImage: 'images/github-brands.svg'
	// },
	// {
	// 	id: 'card24',
	// 	cardFrontImage: 'images/memoryCards/glass-martini-alt-solid'
	// },
	// {
	// 	id: 'card25',
	// 	cardFrontImage: 'images/memoryCards/headphones-solid.svg'
	// },
	{
		id: 'card1',
		cardFrontImage: 'images/memoryCards/accessible-icon-brands.svg'
	},
	// {
	// 	id: 'card2',
	// 	cardFrontImage: 'images/memoryCards/angrycreative-brands.svg'
	// },
	// {
	// 	id: 'card3',
	// 	cardFrontImage: 'images/memoryCards/asterisk-solid.svg'
	// },
	{
		id: 'card4',
		cardFrontImage: 'images/memoryCards/balance-scale-right-solid.svg'
	},
	// {
	// 	id: 'card5',
	// 	cardFrontImage: 'images/memoryCards/brain-solid.svg'
	// },
	// {
	// 	id: 'card6',
	// 	cardFrontImage: 'images/memoryCards/cloud-sun-rain-solid.svg'
	// },
	{
		id: 'card7',
		cardFrontImage: 'images/memoryCards/cocktail-solid.svg'
	},
	{
		id: 'card8',
		cardFrontImage: 'images/memoryCards/heart-solid.svg'
	},
	// {
	// 	id: 'card9',
	// 	cardFrontImage: 'images/memoryCards/icons-solid.svg'
	// },
	{
		id: 'card10',
		cardFrontImage: 'images/memoryCards/praying-hands-solid.svg'
	},
	// {
	// 	id: 'card11',
	// 	cardFrontImage: 'images/memoryCards/lemon-regular.svg'
	// },
	// {
	// 	id: 'card12',
	// 	cardFrontImage: 'images/memoryCards/hiking-solid.svg'
	// },
	// {
	// 	id: 'card13',
	// 	cardFrontImage: 'images/memoryCards/cannabis-solid.svg'
	// },
	// {
	// 	id: 'card14',
	// 	cardFrontImage: 'images/memoryCards/pepper-hot-solid.svg'
	// },
	// {
	// 	id: 'card15',
	// 	cardFrontImage: 'images/memoryCards/passport-solid.svg'
	// },
	{
		id: 'card16',
		cardFrontImage: 'images/memoryCards/code-solid.svg'
	},
	{
		id: 'card17',
		cardFrontImage: 'images/memoryCards/coffee-solid.svg'
	},
	// {
	// 	id: 'card18',
	// 	cardFrontImage: 'images/memoryCards/dev-brands.svg'
	// },
	// {
	// 	id: 'card19',
	// 	cardFrontImage: 'images/memoryCards/door-open-solid.svg'
	// },
	// {
	// 	id: 'card20',
	// 	cardFrontImage: 'images/memoryCards/female-solid.svg'
	// },
	// {
	// 	id: 'card21',
	// 	cardFrontImage: 'images/memoryCards/free-code-camp-brands.svg'
	// },
	{
		id: 'card22',
		cardFrontImage: 'images/memoryCards/gem-regular.svg'
	}
	// {
	// 	id: 'card23',
	// 	cardFrontImage: 'images/github-brands.svg'
	// },
	// {
	// 	id: 'card24',
	// 	cardFrontImage: 'images/memoryCards/glass-martini-alt-solid'
	// },
	// {
	// 	id: 'card25',
	// 	cardFrontImage: 'images/memoryCards/headphones-solid.svg'
	// }
	// All card images provided by Font Awesome's Free License.
]

let flipped = false
let firstCard, secondCard

// alert('You have the memory of an elephant.  You win, Congrats!) when all eight matches are made

let matchedCards = []

let alertWin = () => {
	if (matchedCards.length === 16) {
		alert(
			'You have the memory of an elephant.  You WIN!! \n Press the New Game Button to play again.'
		)
	}
}

// Reset both the firstCard and secondCard

let resetCards = (firstCard, secondCard) => {
	setTimeout(() => {
		// Flip both cards back over

		firstCard.classList.replace('flipped', 'unflipped')
		secondCard.classList.replace('flipped', 'unflipped')
		firstCard.setAttribute('src', ' ')
		console.log(firstCard)
		secondCard.setAttribute('src', ' ')
		console.log(secondCard)

		firstCard.setAttribute(
			'style',
			'background-color:#ccfbfe; border: 1px solid; border-color:#af489a; padding: 1em'
		)
		secondCard.setAttribute(
			'style',
			'background-color:#ccfbfe; border: 1px solid; border-color:#af489a; padding: 1em'
		)
	}, 900)
}

// Check user's firstCard and secondCard matching Function

// TODO: Fix card matching functionality. Note: the third card selected within the sequence (should be a new firstCard),
// remains with cardFrontImage rendering but no longer has the `src` and has class unflipped
let checkForMatch = () => {
	// When firstCard and secondCard match

	if (firstCard.getAttribute('src') === secondCard.getAttribute('src')) {
		// Both cardFrontImages remain visible (flipped up) and flipCard function removed.

		firstCard.removeEventListener('click', flipCard)
		secondCard.removeEventListener('click', flipCard)

		matchedCards.push(firstCard.getAttribute('id'))
		matchedCards.push(secondCard.getAttribute('id'))
		// alert('You found a match.. keep going to find them all, for the WIN!')

		// When firstCard and secondCard do NOT match
	} else {
		resetCards(firstCard, secondCard)
	}
	firstCard = null
	secondCard = null
	flipped = false
	console.log(firstCard)
	console.log(secondCard)
	alertWin()
}

// Flip Card Function
let flipCard = function() {
	let cardId = this.getAttribute('dataId', cards[0].cardFrontImage)
	this.setAttribute('src', cards[cardId].cardFrontImage)
	this.setAttribute(
		'style',
		'background-color:#AD7A99; border: 1px solid; border-color:#98D2EB; svg { fill: #fff }'
	)
	this.classList.add('flipped')

	if (this === firstCard) return
	if (!flipped) {
		flipped = true
		firstCard = this
		return
	}
	// console.log(firstCard)
	console.log(firstCard.getAttribute('src'))
	secondCard = this
	// console.log(secondCard)
	console.log(secondCard.getAttribute('src'))

	checkForMatch()
}

// Create game board
let createBoard = (() => {
	for (let i = 0; i < 16; i++) {
		// Create an image element for each item in the array.
		let cardElement = document.createElement('img')
		// Set each created image element with data attribute of `data-id`.
		cardElement.setAttribute('dataId', [i])
		// Add onClick to each created element.
		cardElement.addEventListener('click', flipCard)
		// Append the created images to the html element gameBoard as child elements.
		document.getElementById('gameBoard').appendChild(cardElement)
	}
})()

// Create a shuffleBoard()
// Fisher–Yates Shuffle Algorithm
let cardArrayLength = cards.length - 1
let randomIndex, tempCardArray
;(shuffleBoard = () => {
	for (i = cardArrayLength; i > 0; i--) {
		randomIndex = Math.floor(Math.random() * i)
		tempCardArray = cards[i]
		cards[i] = cards[randomIndex]
		cards[randomIndex] = tempCardArray
	}
})()

// References:
// * Fisher–Yates Shuffle Algorithm
// * Marina Ferreira: https://marina-ferreira.github.io/projects/js/memory-game/
